# Environment
ENVIRONMENT=development

# Database Configuration
DATABASE_TYPE=sqlite
DATABASE_URL=sqlite:///./data/warehouse/retail.db

# Supabase Integration (PostgreSQL)
# Uncomment and configure for Supabase usage:
# DATABASE_TYPE=postgresql
# DATABASE_URL=postgresql://postgres:[password]@db.[project].supabase.co:5432/postgres?sslmode=require
# SUPABASE_URL=https://[project].supabase.co
# SUPABASE_KEY=your_supabase_anon_key
# SUPABASE_SERVICE_KEY=your_supabase_service_key
# SUPABASE_SCHEMA=retail_dwh
# ENABLE_SUPABASE_RLS=true

# Spark
SPARK_MASTER=local[*]
SPARK_APP_NAME=RetailETL
SPARK_MEMORY=4g
SPARK_EXECUTOR_MEMORY=2g
SPARK_DRIVER_MEMORY=2g
SPARK_SQL_SHUFFLE_PARTITIONS=8

# API
API_HOST=0.0.0.0
API_PORT=8000
API_WORKERS=2
API_RELOAD=true
API_LOG_LEVEL=info

# Security
SECRET_KEY=change-me
BASIC_AUTH_USERNAME=admin
BASIC_AUTH_PASSWORD=changeme123

# Search Engines
# Typesense Configuration
TYPESENSE_API_KEY=changeme
TYPESENSE_HOST=localhost
TYPESENSE_PORT=8108
TYPESENSE_PROTOCOL=http

# Elasticsearch Configuration
ELASTICSEARCH_HOST=localhost
ELASTICSEARCH_PORT=9200
ELASTICSEARCH_SCHEME=http
ELASTICSEARCH_USERNAME=
ELASTICSEARCH_PASSWORD=
ELASTICSEARCH_INDEX_PREFIX=pwc-retail

# Paths
BRONZE_PATH=./data/bronze
SILVER_PATH=./data/silver
GOLD_PATH=./data/gold
RAW_DATA_PATH=./data/raw
ONLINE_RETAIL_FILE=online_retail_II.xlsx

# External API Configuration
# Get free API key from: https://app.exchangerate-api.com/sign-up
CURRENCY_API_KEY=your_exchangerate_api_key_here
ENABLE_EXTERNAL_ENRICHMENT=true
ENRICHMENT_BATCH_SIZE=10

# Feature Flags
ENABLE_VECTOR_SEARCH=true
ENABLE_DISTRIBUTED_MESSAGING=true
ENABLE_EVENT_STREAMING=true
ENABLE_MONITORING=false

# ========================================
# PRODUCTION CONFIGURATION
# ========================================

# PostgreSQL for Production
POSTGRES_DB=retail_production
POSTGRES_USER=postgres
POSTGRES_PASSWORD=your_secure_production_password
POSTGRES_HOST=localhost
POSTGRES_PORT=5432

# RabbitMQ Configuration (replaces Redis for messaging)
RABBITMQ_HOST=localhost
RABBITMQ_PORT=5672
RABBITMQ_USER=admin
RABBITMQ_PASSWORD=your_rabbitmq_password
RABBITMQ_VHOST=/
RABBITMQ_URL=amqp://admin:your_rabbitmq_password@localhost:5672/
RABBITMQ_MANAGEMENT_PORT=15672

# Kafka Configuration (for event streaming)
KAFKA_BOOTSTRAP_SERVERS=localhost:9092
KAFKA_TOPIC_PREFIX=pwc-retail
KAFKA_CONSUMER_GROUP=pwc-consumers
KAFKA_REPLICATION_FACTOR=1
KAFKA_NUM_PARTITIONS=3
KAFKA_LOG_RETENTION_HOURS=168

# ========================================
# ORCHESTRATION CONFIGURATION
# ========================================

# Airflow Configuration
AIRFLOW_HOME=./airflow_home
AIRFLOW_FERNET_KEY=your_fernet_key_here_base64_encoded
AIRFLOW_SECRET_KEY=your_airflow_secret_key_here
AIRFLOW_ADMIN_PASSWORD=airflow_admin_password
AIRFLOW_DATABASE_URL=postgresql://postgres:password@localhost:5432/airflow_db

# Dagster Configuration
DAGSTER_HOME=./dagster_home
DAGSTER_POSTGRES_HOST=localhost
DAGSTER_POSTGRES_PORT=5432
DAGSTER_POSTGRES_USER=postgres
DAGSTER_POSTGRES_PASSWORD=your_password
DAGSTER_POSTGRES_DB=dagster_db

# ========================================
# MONITORING AND ALERTING
# ========================================

# Prometheus
PROMETHEUS_HOST=localhost
PROMETHEUS_PORT=9090

# Grafana
GRAFANA_ADMIN_USER=admin
GRAFANA_PASSWORD=your_grafana_password

# Slack Integration
SLACK_WEBHOOK_URL=https://hooks.slack.com/services/YOUR/SLACK/WEBHOOK
SLACK_CHANNEL=#alerts
SLACK_USERNAME=ETL-Monitor

# Email Alerts
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_USER=your_email@gmail.com
SMTP_PASSWORD=your_app_password
ALERT_EMAIL_FROM=alerts@yourcompany.com
ALERT_EMAIL_TO=admin@yourcompany.com,devops@yourcompany.com

# ========================================
# SECURITY CONFIGURATION
# ========================================

# JWT Configuration
JWT_SECRET_KEY=your_jwt_secret_key_here
JWT_ACCESS_TOKEN_EXPIRE_MINUTES=60
JWT_REFRESH_TOKEN_EXPIRE_DAYS=7

# API Rate Limiting
RATE_LIMIT_ENABLED=true
RATE_LIMIT_REQUESTS_PER_MINUTE=100

# CORS Settings
CORS_ORIGINS=http://localhost:3000,http://localhost:8080
CORS_ALLOW_CREDENTIALS=true

# ========================================
# PERFORMANCE TUNING
# ========================================

# API Worker Configuration
WORKER_PROCESSES=1
MAX_CONNECTIONS=1000
KEEP_ALIVE_TIMEOUT=5

# Database Connection Pool
DB_POOL_SIZE=5
DB_MAX_OVERFLOW=10
DB_POOL_TIMEOUT=30

# Cache Configuration
CACHE_TTL_SECONDS=300
ENABLE_QUERY_CACHE=true

# ========================================
# DEPLOYMENT CONFIGURATION
# ========================================

# Docker Registry
DOCKER_REGISTRY=ghcr.io
DOCKER_IMAGE_PREFIX=your-org/pwc-challenge-dataengineer

# Environment-specific settings
LOG_LEVEL=INFO
DEBUG=false
WORKER_PROCESSES=4
MAX_CONNECTIONS=1000
